<!DOCTYPE html>
<html>
<head>
  <title>Opening UnifyApps Matrix</title>
  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    window.onload = function() {
      // Get the URL from the QR Code
      let appUrl = getQueryParam('url'); // e.g., "https://boat-shopping-qa.matrix-qa.unifyapps.com"
      
      if (appUrl) {
        let encodedUrl = encodeURIComponent(appUrl);
        
        // Try opening Matrix app with the given URL
        setTimeout(function() {
          window.location.href = `matrix://open?url=${encodedUrl}`;
        }, 100);
      }

      // Fallback to Store if Matrix is not installed
      setTimeout(function() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        var isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
        
        if (isIOS) {
          window.location.href = "https://testflight.apple.com/join/gqe8xWtD";
        } else {
          window.location.href = "https://play.google.com/store/apps/details?id=com.unifyapps.matrix&hl=en_IN";
        }
      }, 2000);
    };
  </script>
</head>
<body>
  <h1>Opening UnifyApps Matrix...</h1>
  <p>If not redirected automatically, <a id="storeLink" href="#">click here</a>.</p>
  <script>
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;
    var isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;
    document.getElementById("storeLink").href = isIOS 
      ? "https://testflight.apple.com/join/gqe8xWtD"
      : "https://play.google.com/store/apps/details?id=com.unifyapps.matrix&hl=en_IN";
  </script>
</body>
</html>
